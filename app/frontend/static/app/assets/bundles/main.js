!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static/assets/bundles/",n(n.s=1)}([function(e,t,n){
/*!
 * bulma-toast 1.5.4 
 * (c) 2018-present @rfoel <rafaelfr@outlook.com> 
 * Released under the MIT License.
 */
!function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(){for(var e in(l={noticesTopLeft:c.createElement("div"),noticesTopRight:c.createElement("div"),noticesBottomLeft:c.createElement("div"),noticesBottomRight:c.createElement("div"),noticesTopCenter:c.createElement("div"),noticesBottomCenter:c.createElement("div"),noticesCenter:c.createElement("div")}).noticesTopLeft.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","left:0;top:0;text-align:left;align-items:flex-start;")),l.noticesTopRight.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","right:0;top:0;text-align:right;align-items:flex-end;")),l.noticesBottomLeft.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","left:0;bottom:0;text-align:left;align-items:flex-start;")),l.noticesBottomRight.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","right:0;bottom:0;text-align:right;align-items:flex-end;")),l.noticesTopCenter.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","top:0;left:0;right:0;text-align:center;align-items:center;")),l.noticesBottomCenter.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","bottom:0;left:0;right:0;text-align:center;align-items:center;")),l.noticesCenter.setAttribute("style","".concat("width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;","top:0;left:0;right:0;bottom:0;flex-flow:column;justify-content:center;align-items:center;")),l)c.body.appendChild(l[e]);s={"top-left":l.noticesTopLeft,"top-right":l.noticesTopRight,"top-center":l.noticesTopCenter,"bottom-left":l.noticesBottomLeft,"bottom-right":l.noticesBottomRight,"bottom-center":l.noticesBottomCenter,center:l.noticesCenter},a=!0}var o={message:"Your message here",duration:2e3,position:"top-right",closeOnClick:!0,opacity:1},a=!1,l={},s={},c=document,d=function(){function e(n){var i=this;t(this,e),this.element=c.createElement("div"),this.opacity=n.opacity,this.type=n.type,this.animate=n.animate,this.dismissible=n.dismissible,this.closeOnClick=n.closeOnClick,this.message=n.message,this.duration=n.duration,this.pauseOnHover=n.pauseOnHover;var r="width:auto;pointer-events:auto;display:inline-flex;white-space:pre-wrap;opacity:".concat(this.opacity,";"),o=["notification"];if(this.type&&o.push(this.type),this.animate&&this.animate.in&&(o.push("animated ".concat(this.animate.in)),this.onAnimationEnd((function(){return i.element.classList.remove(i.animate.in)}))),this.element.className=o.join(" "),this.dismissible){var a=c.createElement("button");a.className="delete",a.addEventListener("click",(function(){i.destroy()})),this.element.insertAdjacentElement("afterbegin",a)}else r+="padding: 1.25rem 1.5rem";this.closeOnClick&&this.element.addEventListener("click",(function(){i.destroy()})),this.element.setAttribute("style",r),"string"==typeof this.message?this.element.insertAdjacentHTML("beforeend",this.message):this.element.appendChild(this.message);var l=new u((function(){i.destroy()}),this.duration);this.pauseOnHover&&(this.element.addEventListener("mouseover",(function(){l.pause()})),this.element.addEventListener("mouseout",(function(){l.resume()})))}return i(e,[{key:"destroy",value:function(){var e=this;this.animate&&this.animate.out?(this.element.classList.add(this.animate.out),this.onAnimationEnd((function(){return e.removeChild(e.element)}))):this.removeChild(this.element)}},{key:"removeChild",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"onAnimationEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var n in t)if(void 0!==this.element.style[n]){this.element.addEventListener(t[n],(function(){return e()}));break}}}]),e}(),u=function(){function e(n,i){t(this,e),this.timer,this.start,this.remaining=i,this.callback=n,this.resume()}return i(e,[{key:"pause",value:function(){window.clearTimeout(this.timer),this.remaining-=new Date-this.start}},{key:"resume",value:function(){this.start=new Date,window.clearTimeout(this.timer),this.timer=window.setTimeout(this.callback,this.remaining)}}]),e}();e.setDoc=function(e){for(var t in l){var n=l[t];n.parentNode.removeChild(n)}c=e,r()},e.toast=function(e){a||r();var t=Object.assign({},o,e),n=new d(t);(s[t.position]||s[o.position]).appendChild(n.element)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){e.exports=n(13)},function(e,t,n){"use strict";n.r(t);n(3),n(4),n(5),n(6),n(7),n(8),n(9);n(10),n(11)},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var i=n(0);var r=function(e){var t=e.documentElement,n=a(".modal"),i=a(".modal-button"),r=a(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button");function o(){t.classList.remove("is-clipped"),n.forEach((function(e){e.classList.remove("is-active")}))}function a(t){return Array.prototype.slice.call(e.querySelectorAll(t),0)}i.length>0&&i.forEach((function(n){n.addEventListener("click",(function(){var i=n.dataset.target,r=e.getElementById(i);t.classList.add("is-clipped"),r.classList.add("is-active")}))})),r.length>0&&r.forEach((function(e){e.addEventListener("click",(function(){o()}))})),e.addEventListener("keydown",(function(e){27===(e||window.event).keyCode&&o()}))};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.document=t,this.originalWindowTitle=t.title,this.cookieNotice(),r(t)}var t,n,i;return t=e,(n=[{key:"cookieNotice",value:function(){var e=this,t=this.document.getElementById("gdpr-notice");this.getCookie("gdpr")?t.style.display="none":(t.style.display="block",this.document.getElementById("gdpr-button").addEventListener("click",(function(){e.createCookie("gdpr",!0,31),t.classList.add("animated","bounceOutLeft")})))}},{key:"getCookie",value:function(e){return this.document.cookie.length>0&&this.document.cookie.split(";").map((function(e){return e.trim()})).find((function(t){return t.split("=")[0]===e}))}},{key:"createCookie",value:function(e,t,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*3600*1e3),i="; expires=".concat(r.toUTCString())}this.document.cookie="".concat(e,"=").concat(t).concat(i,"; path=/")}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.document.createElement(e);return Object.keys(t).forEach((function(e){return i.setAttribute(e,t[e])})),null!=n&&n.appendChild(i),i}},{key:"passwordStrength",value:function(e){var t={0:"Bad",1:"Okay",2:"Good",3:"Very Good",4:"Strong"},n=this.document.getElementById(e),i=this.create("progress",{id:"password-strength-meter",value:0,max:4},n.parentNode),r=this.create("p",{id:"password-strength-text"},n.parentNode);n.addEventListener("keyup",(function(e){var n=e.srcElement.value,o=zxcvbn(n).score;i.value=o,r.textContent=""!==n?"Strength: ".concat(t[o]):""}))}},{key:"passwordsMatch",value:function(e,t,n){e.value===t.value&&t.value?(n.setAttribute("checked",""),n.removeAttribute("unchecked")):(n.removeAttribute("checked"),n.setAttribute("unchecked",""))}},{key:"submitFormOnEnter",value:function(e){this.document.addEventListener("keydown",(function(t){13===t.keyCode&&document.createElement("form").submit.call(e)}))}},{key:"removeElement",value:function(e){var t=this.document.getElementById(e);t.parentNode.removeChild(t)}},{key:"updateNotifications",value:function(e){function t(t,n,i,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,i){var r=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&200===o.status){var a=JSON.parse(o.responseText),l=a.length;if(Number(t.textContent)===l)return;if(l>0){r.document.title="(".concat(l,") ").concat(originalWindowTitle),_deleteNotifications(),t.textContent=l,t.classList.remove("hide"),i.classList.add("hide");var s=r.document.createElement("ul");s.classList.add("notification-element"),a.forEach((function(o){var a=JSON.parse(o.data);if(a.file_name&&o.name.includes("export_practice_task")){var l=r.document.createElement("li");l.classList.add("dropdown-item");var c=r.document.createElement("a");c.textContent="Your ".concat(a.file_name.split(".")[1].toUpperCase()," file is ready. Click here to download it"),c.href="/exports/".concat(a.file_name),l.appendChild(c),l.addEventListener("click",(function(r){return setTimeout((function(){return updateNotifications(e,t,n,i)}),6e4)})),s.appendChild(l),n.appendChild(s)}}))}else r.document.title=originalWindowTitle,_deleteNotifications(),t.textContent=0,t.classList.add("hide"),i.classList.remove("hide")}},o.open("GET","/notifications?since=".concat(e)),o.send(null)}))},{key:"_deleteNotifications",value:function(){elementsToRemove=Array.from(this.document.getElementsByClassName("notification-element")),elementsToRemove.forEach((function(e){return e.parentElement.removeChild(e)}))}},{key:"startTabsWithContent",value:function(){var e=this.document.querySelectorAll(".tabs li"),t=this.document.querySelectorAll(".tab-content"),n=function(e){return o(e.parentElement.children).indexOf(e)};e.forEach((function(i){i.addEventListener("click",(function(){e.forEach((function(e){return e.classList.remove("is-active")})),t.forEach((function(e){return e.classList.remove("is-active")})),i.classList.add("is-active"),function(e){t[n(e)].classList.add("is-active")}(i)}))})),e[0].click()}},{key:"isNumberKey",value:function(e){var t=e.which?e.which:event.keyCode;return!(t>31&&(t<48||t>57))}},{key:"getOtherElFromScreenType",value:function(e){return e.id.includes("mobile")?this.document.getElementById(e.id.split("-mobile")[0]):this.document.getElementById("".concat(e.id,"-mobile"))}},{key:"getSelectValues",value:function(e){return Array.from(e&&e.options).flatMap((function(e){return e.selected?[e.value||e.text]:[]}))}}])&&a(t.prototype,n),i&&a(t,i),e}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var u=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,e),this.workFunc=this._updateTimer,this.interval=n,this.errorFunc=r,this.timesUpFunc=i,this.timeComponents={hour:t.hour,minutes:t.minutes,seconds:t.seconds},this.sound=new Howl({src:"/sounds/sos.mp3",loop:!0})}return d(e,[{key:"start",value:function(e){this.time=e,this.originalTime=e,this.expected=Date.now()+this.interval,this.timeout=setTimeout(this.step.bind(this),this.interval),this.workFunc()}},{key:"stop",value:function(){clearTimeout(this.timeout),this._restoreTime(),this.sound.stop()}},{key:"step",value:function(){if(0==this.time)return this.sound.play(),void this.timesUpFunc();var e=Date.now()-this.expected;this.errorFunc&&e>this.interval&&this.errorFunc(),this.time--,this.workFunc(),this.expected+=this.interval,this.timeout=setTimeout(this.step.bind(this),Math.max(0,this.interval-e))}},{key:"_updateTimer",value:function(){var e=this._separateTime(this.time);this._updateTimeComponents(e)}},{key:"_restoreTime",value:function(){var e=this._separateTime(this.originalTime);this._updateTimeComponents(e)}},{key:"_separateTime",value:function(e){var t=Math.floor(e/3600),n=3600*t,i=Math.floor(Math.abs(n-e)/60);return{hours:t,minutes:i,seconds:e-n-60*i}}},{key:"_updateTimeComponents",value:function(e){this.timeComponents.hour.textContent=e.hours,this.timeComponents.minutes.textContent=e.minutes,this.timeComponents.seconds.textContent=e.seconds}}]),e}(),h=function(){function e(){var t=this;s(this,e),this._ctx=new AudioContext,this._soundBeatOne=new Howl({src:"/sounds/one.wav"}),this._soundBeatOther=new Howl({src:"/sounds/other.wav"}),this._soundBeatBetween=new Howl({src:"/sounds/between.wav"}),this._lastBar=0,this._lastBeat=0,this._metronome=window.MusicalTimer((function(){"running"!==t._ctx.state&&t._ctx.resume(),t._lastBar!==t._metronome.bar&&(t._lastBar=t._metronome.bar,t._beep(t._soundBeatOne)),t._lastBeat!==t._metronome.beat?(t._lastBeat=t._metronome.beat,t._beep(t._soundBeatBetween)):t._beep(t._soundBeatOther)}))}return d(e,[{key:"_beep",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.play();try{this._signatureVisual.children[this._metronome.beat-2].classList.remove("highlightBeat"),this._signatureVisual.children[this._metronome.beat-2].classList.remove("highlightBeat1"),this._signatureVisual.children[this._metronome.beat-1].classList.add("highlightBeat")}catch(e){this._signatureVisual.lastElementChild.classList.remove("highlightBeat"),this._signatureVisual.children[this._metronome.beat-1].classList.add("highlightBeat1")}this._barNumberElement.value=this._metronome.bar}},{key:"play",value:function(){this._metronome.play()}},{key:"pause",value:function(){this._metronome.pause()}},{key:"stop",value:function(){try{this._signatureVisual.children[this._metronome.beat-1].classList.remove("highlightBeat"),this._signatureVisual.children[this._metronome.beat-1].classList.remove("highlightBeat1")}finally{this._barNumberElement.value=1,this._metronome.stop()}}},{key:"setTempo",value:function(e){this._metronome.tempo=e}},{key:"setSignature",value:function(e){this._metronome.signature=e}},{key:"setSignatureVisual",value:function(e){this._signatureVisual=e}},{key:"setSubdivision",value:function(e){this._metronome.resolutionFactor=e}},{key:"setBarNumberElement",value:function(e){this._barNumberElement=e}}]),e}();function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"sessionKeysListener",value:function(e){var t=e.ctrlKey,n=e.keyCode;if(t&&83===n)e.preventDefault(),savePractice();else if(t&&46===n)deletePractice();else if(13===n){for(var i=e.srcElement;i=i.parentElement;)if(i&&["UL","TABLE"].includes(i.tagName))return void addEntryOnEnter(i)}else if("INPUT"===e.target.tagName){var r=parseInt(e.target.id.split("-")[1]);if("TD"===e.target.parentElement.tagName){var o=e.target.parentElement.parentElement,a=Array.from(document.getElementById("practice-exercises-mobile").children).filter((function(e){return"HR"!==e.tagName}))[r];a.children[0].children[1].value=o.children[1].children[0].value;var l=a.children[1].children[0].children[0].children;l[0].children[1].value=o.children[2].children[0].value,l[1].children[1].value=o.children[3].children[0].value,l[2].children[1].value=o.children[4].children[0].value}else if("DIV"===e.target.parentElement.tagName){for(var s=e.target;"practice-exercises-mobile"!==s.id;)s=s.parentElement;s=Array.from(s.children).find((function(e){if(null!==e.firstElementChild)return e.children[0].children[1].id.includes(r)}));var c=document.getElementById("practice-exercises").tBodies[0].children[r],d=s.children[1].children[0].children[0];c.children[1].children[0].value=s.children[0].children[1].value,c.children[2].children[0].value=d.children[0].children[1].value,c.children[3].children[0].value=d.children[1].children[1].value,c.children[4].children[0].value=d.children[2].children[1].value}else{var u=e.target.parentElement.parentElement.parentElement;u.id.includes("mobile")?document.getElementById(u.id.split("-mobile")[0]).children[r].children[1].children[0].value=e.target.value:u.classList.contains("field-body")||(document.getElementById("".concat(u.id,"-mobile")).children[r].children[1].children[0].value=e.target.value)}}else if("TEXTAREA"===e.target.tagName){var h=e.target.parentElement.id;(h.includes("mobile")?document.getElementById("".concat(h.split("-mobile")[0])):document.getElementById("".concat(h,"-mobile"))).children[0].value=e.target.value}}},{key:"addEntryOnEnter",value:function(e){var t,n;e.id.includes("mobile")?(t=document.getElementById(e.id.split("-mobile")[0]),n=e):(t=e,n=document.getElementById("".concat(e.id,"-mobile"))),addNewItem(t),addNewItem(n)}},{key:"savePractice",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE)if(200===t.status&&e){var n=JSON.parse(t.responseText);refreshFields(n),Array.from(document.getElementsByClassName("notification")).forEach((function(e){return e.style.display="none"})),bulmaToast.toast({message:n.toast,type:"is-info",animate:{in:"fadeIn",out:"fadeOut"}})}else 200!==t.status&&console.log("Error:",t)},t.open("POST",practiceUrl,e);var n=new FormData(document.getElementById("practice-form"));t.send(n)}},{key:"deletePractice",value:function(){if(confirm("Are you sure you want to delete this practice session?")){var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&(200===e.status?window.location.replace(e.responseText):console.log("Error: ",e))},e.open("DELETE",practiceUrl,!0),e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e.send(null)}}},{key:"refreshFields",value:function(e){refresh("ul-goals",e.goals),refresh("ul-positives",e.positives),refresh("ul-improvements",e.improvements),refresh("practice-exercises",e.exercises)}},{key:"refresh",value:function(e,t){var n=document.getElementById(e);if("UL"===n.tagName){var i=n.children.length;i>1&&i!==t.length&&refreshList(n,t)}else if("TABLE"===n.tagName){var r=n.children[1].children.length;r>1&&r!==t.length&&refreshTable(n,t)}}},{key:"refreshList",value:function(e,t){for(;1!==e.children.length;)e.removeChild(e.lastChild);if(t.length){e.children[0].children[1].firstElementChild.value=t[0];for(var n=1;n<t.length;n++)addNewItem(e),e.lastChild.children[1].firstElementChild.value=t[n]}}},{key:"refreshTable",value:function(e,t){for(var n=e.children[1];1!==n.children.length;)n.removeChild(n.lastChild);if(t.length){n.children[0].children[1].firstElementChild.value=t[0].name;for(var i=1;i<t.length;i++)addNewItem(e),n.lastChild.children[1].firstElementChild.value=t[i].name,n.lastChild.children[2].firstElementChild.value=t[i].bpm_start,n.lastChild.children[3].firstElementChild.value=t[i].bpm_end,n.lastChild.children[4].firstElementChild.value=t[i].minutes}}},{key:"addNodeListener",value:function(e){e.addEventListener("click",(function(e){for(var t=e.srcElement;!t.classList.contains("card");)t=t.parentNode;for(var n=t.lastElementChild;!["UL","TABLE"].includes(n.tagName);)n=n.firstElementChild;var i=getOtherElFromScreenType(n);addNewItem(n),addNewItem(i)}))}},{key:"addNewItem",value:function(e){if(removeFocus(lastActiveElement),"UL"!==e.tagName||e.id.includes("exercises"))if("UL"===e.tagName){var t=e.children.length,n=e.children[t-1],i=n.cloneNode(!0),r="<b>".concat(parseInt(i.children[0].children[0].textContent.split(".")[0])+1,".</b>");i.children[0].children[0].innerHTML=r,n.firstElementChild.children[1].classList.remove("is-focused");var o=i.children[0].children[1];updateTextInput(i.children[0].children[1]),o.textContent.bold();for(var a=0;a<3;a++){var l=i.children[1].children[0].children[0].children[a].children[1];updateCellInput(l),l.addEventListener("change",sessionKeysListener)}e.append(document.createElement("hr")),e.appendChild(i),removeNodeListener(i.firstElementChild.lastElementChild),focusElement(o),lastActiveElement=o}else{var s=e,c=s.tBodies[0].children.length,d=s.tBodies[0].children[c-1],u=d.cloneNode(!0),h=u.children;h[0].textContent=Number(h[0].textContent)+1;for(var m=1;m<5;m++){var f=h[m].firstElementChild;updateCellInput(f),f.addEventListener("change",sessionKeysListener)}removeNodeListener(h[5]),e.tBodies[0].appendChild(u),d.children[1].children[0].classList.remove("is-focused"),focusElement(u.children[1].children[0]),lastActiveElement=u.children[1].children[0]}else{var v=e.children.length,p=e.children[v-1],y=p.cloneNode(!0),g=y.children[1].firstElementChild;p.children[1].firstElementChild.classList.remove("is-focused"),updateTextInput(g),e.appendChild(y),removeNodeListener(y.lastElementChild),focusElement(g),lastActiveElement=g}}},{key:"updateTextInput",value:function(e){var t=createNewId(e.id);e.id=t,e.name=t,e.value=""}},{key:"createNewId",value:function(e){var t=e.split("-");return"".concat(t[0],"-").concat(Number(t[1])+1,"-").concat(t[2])}},{key:"updateCellInput",value:function(e){var t=createNewId(e.id);e.id=t,e.name=t,e.value=e.defaultValue,e.hasAttribute("min")||(e.value="")}},{key:"removeNodeListener",value:function(e){e.addEventListener("click",(function(e){for(var t=e.srcElement;"LI"!==t.tagName&&"TR"!==t.tagName;)t=t.parentNode;if(t.parentElement.id.includes("exercises-mobile")){var n=t.parentElement;if(1===n.childElementCount){t.firstElementChild.children[1].value="";for(var i=0;i<3;i++){var r=t.lastElementChild.children[0].children[0].children[0].children[1];r.value=r.defaultValue}var o=document.getElementById("practice-exercises").tBodies[0].children[0].children;o[1].children[0].value="";for(var a=2;a<4;a++)o[a].children[0].value=o[2].children[0].defaultValue}else{var l=Array.from(t.parentElement.children).filter((function(e){return"HR"!==e.tagName})).findIndex((function(e){return e===t})),s=Array.from(n.children).find((function(e){return e===t})),c=Array.from(n.children).findIndex((function(e){return e===t}));n.removeChild(s),0===l?n.removeChild(n.children[c]):n.removeChild(n.children[c-1]),updateIdsMobile();var d=document.getElementById("practice-exercises").tBodies[0];d.removeChild(d.children[l]),updateIdsDesktop(d),Array.from(d.children).forEach((function(e,t){return e.children[0].textContent=t+1}))}}else if("LI"===t.tagName){var u=t.parentElement,h=Array.from(u.children).findIndex((function(e){return e===t})),m=getOtherElFromScreenType(u),f=m.children[h];1===u.childElementCount?(t.children[1].firstElementChild.value="",f.children[1].firstElementChild.value=""):(u.removeChild(t),m.removeChild(f))}else{var v=t.parentElement,p=document.getElementById("practice-exercises-mobile");if(1===v.childElementCount){t.children[1].firstElementChild.value="";for(var y=2;y<5;y++){var g=t.children[y].firstElementChild;g.value=g.defaultValue,updateNewIdTable(g,0)}p.children[0].children[0].children[1].value="";for(var E=0;E<3;E++){var b=p.children[0].children[1].children[0].children[0].children[E].children[1];b.value=b.defaultValue}}else{v.removeChild(t),updateIdsDesktop(v);var C=parseInt(t.children[1].firstElementChild.id.split("-")[1]),k=Array.from(p.children).findIndex((function(e){if(null!==e.firstElementChild)return e.children[0].children[1].id.includes(C)}));p.removeChild(p.children[k]),0===C?p.removeChild(p.children[k]):p.removeChild(p.children[k-1]),updateIdsMobile()}Array.from(v.children).forEach((function(e,t){return e.children[0].textContent=t+1}))}}))}},{key:"updateIdsMobile",value:function(){var e=document.getElementById("practice-exercises-mobile");Array.from(e.children).filter((function(e){return"HR"!==e.tagName})).forEach((function(e,t){var n=e.firstElementChild.children[1].id.split("-");e.firstElementChild.firstElementChild.firstElementChild.innerHTML="<b>".concat(t+1,".</b>"),e.firstElementChild.children[1].id="".concat(n[0],"-").concat(t,"-").concat(n[2]);for(var i=0;i<3;i++)updateNewIdTable(e.children[1].firstElementChild.firstElementChild.children[i].children[1],t)}))}},{key:"updateIdsDesktop",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=Array.from(e.children).entries()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=m(r.value,2);idx=a[0],tr=a[1];for(var l=1;l<5;l++)updateNewIdTable(tr.children[l].firstElementChild,idx)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"updateNewIdTable",value:function(e,t){idParts=e.id.split("-"),newId="".concat(idParts[0],"-").concat(t,"-").concat(idParts[2]),e.id=newId,e.name=newId}},{key:"tabListener",value:function(e){9===e&&removeFocus(lastActiveElement)}},{key:"removeFocus",value:function(e){e&&(e.classList.remove("is-focused"),e=null)}},{key:"focusElement",value:function(e){e.focus(),e.className+=" is-focused"}}])&&f(t.prototype,n),i&&f(t,i),e}();n.d(t,"toast",(function(){return i.toast})),n.d(t,"Main",(function(){return l})),n.d(t,"Timer",(function(){return u})),n.d(t,"Metronome",(function(){return h})),n.d(t,"Practice",(function(){return v})),n(2),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}]));