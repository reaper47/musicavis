!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static/assets/bundles/",n(n.s=17)}({0:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new a(e,n);return i.createDropdown(t),i}n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return a}));var a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),this.originalSelect=document.getElementById(t),this.options=Array.from(this.originalSelect.children),this.allowMultiple=n}var t,n,l;return t=e,(n=[{key:"createDropdown",value:function(e){var t=this,n=document.createElement("div");n.classList.add("dropdown-select","wide"),n.tabIndex=0;var i=document.createElement("span");i.classList.add("current"),i.textContent=this.options[0].textContent,n.appendChild(i);var r=document.createElement("div");r.classList.add("list");var l=document.createElement("div");l.classList.add("dd-search");var a=document.createElement("input");a.type="text",a.id="txtSearchValue",a.placeholder=e,a.classList.add("dd-searchbox"),a.autocomplete="off",a.onkeyup=function(){return t._filter()},this.searchBoxInput=a;var s=document.createElement("ul");this.searchBoxOptions=s,this._addItemsToList(this.options),l.appendChild(a),r.appendChild(l),r.appendChild(s),n.appendChild(r),this.newSelect=n,this.originalSelect.parentElement.appendChild(n),this.originalSelect.style.display="none",this._addOpenCloseListener(),this._addClickOutsideListener(),this._addOptionClickListener(),this._addKeysListener()}},{key:"_addItemsToList",value:function(e){var t=this;e.forEach((function(e,n){return t._addItemToList(e,n)})),this.allowMultiple||this.searchBoxOptions.firstElementChild.classList.add("selected")}},{key:"_addItemToList",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.createElement("li");if(i.classList.add("option"),i.index,i.dataset.value=t,this.allowMultiple){var r=document.createElement("div");r.classList.add("multiple-select-item-container");var l=document.createElement("p");l.textContent=e.textContent,r.appendChild(l);var a=document.createElement("label"),s=document.createElement("input");a.classList.add("checkbox"),a.classList.add("checkbox-option"),s.classList.add("checkbox-option"),s.type="checkbox",n&&(i.classList.add("selected"),s.checked=!0),a.appendChild(s),r.append(a),i.appendChild(r)}else i.textContent=e.textContent;this.searchBoxOptions.appendChild(i)}},{key:"_filter",value:function(){var e=this;Array.from(this.searchBoxOptions.children).forEach((function(t){t.textContent.toLowerCase().includes(e.searchBoxInput.value)?t.style.display="block":t.style.display="none"}))}},{key:"_addOpenCloseListener",value:function(){var e=this;this.newSelect.addEventListener("click",(function(t){var n=t.target.classList,i=t.target.parentElement.classList;if(i.contains("open")||i.contains("multiple-select-item-container"))return e._removeTabIndex(),void(e.allowMultiple||e.newSelect.classList.remove("open"));n.contains("dd-searchbox")||n.contains("checkbox-option")||"UL"===t.target.tagName||(e.newSelect.classList.toggle("open"),Array.from(e.searchBoxOptions.children).forEach((function(e){return e.tabIndex=0})),e.searchBoxInput.focus())}))}},{key:"_addClickOutsideListener",value:function(){var e=this;document.addEventListener("click",(function(t){for(var n=t.target;"HTML"!==(n=n.parentElement).tagName;)if(Array.from(n.classList).includes("dropdown-select")&&e.allowMultiple)return;Array.from(t.target.classList).includes("dropdown-select")||(e.newSelect.classList.remove("open"),e.newSelect.removeAttribute("tabindex"),e._removeTabIndex()),t.stopPropagation()}))}},{key:"_removeTabIndex",value:function(){Array.from(this.searchBoxOptions.children).forEach((function(e){return e.removeAttribute("tabindex")}))}},{key:"_addOptionClickListener",value:function(){var e=this;this.newSelect.addEventListener("click",(function(t){var n=t.target;if(e._isValidNewSelectOption(n))if(e.allowMultiple){for(var i="INPUT"===n.tagName;"LI"!==n.tagName;)n=n.parentElement;var r=n.children[0].children[1].children[0];i||(r.checked^=1),r.checked?n.classList.add("selected"):n.classList.remove("selected"),e.originalSelect.children[n.dataset.value].selected=r.checked;var l=main.getSelectValues(e.originalSelect).join(", ");e.newSelect.firstChild.textContent=l||"None"}else Array.from(e.searchBoxOptions.children).forEach((function(e){return e.classList.remove("selected")})),n.classList.add("selected"),e.newSelect.firstChild.textContent=n.textContent,e.originalSelect.value=e.originalSelect.children[n.dataset.value].value}))}},{key:"_isValidNewSelectOption",value:function(e){return!(e.classList.contains("dropdown-select")||e.classList.contains("dd-searchbox")||"UL"===e.tagName||"SPAN"===e.tagName||e.classList.contains("list"))}},{key:"_addKeysListener",value:function(){var e=this;this.newSelect.addEventListener("keydown",(function(t){if(e.newSelect.classList.contains("open")){var n=t.target;13===t.keyCode?n.click():27===t.keyCode?e.newSelect.click():37===t.keyCode&&n.prevSibling?n.prevSibling.focus():40===t.keyCode&&n.nextSibling&&n.nextSibling.focus()}}))}},{key:"addOption",value:function(e){if(""!==e){e=e.toLowerCase();var t=document.createElement("option");t.value=e,t.innerHTML=e.capitalize(),t.selected=!0,this.originalSelect.appendChild(t),this._addItemToList(t,this.newSelect.children[1].children[1].childElementCount,!0)}}}])&&r(t.prototype,n),l&&r(t,l),e}()},17:function(e,t,n){e.exports=n(20)},20:function(e,t,n){"use strict";n.r(t);var i=n(0);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var s=function(){function e(t,n,i){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(this,e),this.workFunc=this._updateTimer,this.interval=n,this.errorFunc=l,this.timesUpFunc=i,this.timeComponents={hour:t.hour,minutes:t.minutes,seconds:t.seconds},this.sound=new Howl({src:"/sounds/sos.mp3",loop:!0})}return a(e,[{key:"start",value:function(e){this.time=e,this.originalTime=e,this.expected=Date.now()+this.interval,this.timeout=setTimeout(this.step.bind(this),this.interval),this.workFunc()}},{key:"stop",value:function(){clearTimeout(this.timeout),this._restoreTime(),this.sound.stop()}},{key:"step",value:function(){if(0==this.time)return this.sound.play(),void this.timesUpFunc();var e=Date.now()-this.expected;this.errorFunc&&e>this.interval&&this.errorFunc(),this.time--,this.workFunc(),this.expected+=this.interval,this.timeout=setTimeout(this.step.bind(this),Math.max(0,this.interval-e))}},{key:"_updateTimer",value:function(){var e=this._separateTime(this.time);this._updateTimeComponents(e)}},{key:"_restoreTime",value:function(){var e=this._separateTime(this.originalTime);this._updateTimeComponents(e)}},{key:"_separateTime",value:function(e){var t=Math.floor(e/3600),n=3600*t,i=Math.floor(Math.abs(n-e)/60);return{hours:t,minutes:i,seconds:e-n-60*i}}},{key:"_updateTimeComponents",value:function(e){this.timeComponents.hour.textContent=e.hours,this.timeComponents.minutes.textContent=e.minutes,this.timeComponents.seconds.textContent=e.seconds}}]),e}(),o=function(){function e(){var t=this;r(this,e),this._ctx=new AudioContext,this._soundBeatOne=new Howl({src:"/sounds/one.wav"}),this._soundBeatOther=new Howl({src:"/sounds/other.wav"}),this._soundBeatBetween=new Howl({src:"/sounds/between.wav"}),this._lastBar=0,this._lastBeat=0,this._metronome=window.MusicalTimer((function(){"running"!==t._ctx.state&&t._ctx.resume(),t._lastBar!==t._metronome.bar&&(t._lastBar=t._metronome.bar,t._beep(t._soundBeatOne)),t._lastBeat!==t._metronome.beat?(t._lastBeat=t._metronome.beat,t._beep(t._soundBeatBetween)):t._beep(t._soundBeatOther)}))}return a(e,[{key:"_beep",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.play();try{this._signatureVisual.children[this._metronome.beat-2].classList.remove("highlightBeat"),this._signatureVisual.children[this._metronome.beat-2].classList.remove("highlightBeat1"),this._signatureVisual.children[this._metronome.beat-1].classList.add("highlightBeat")}catch(e){this._signatureVisual.lastElementChild.classList.remove("highlightBeat"),this._signatureVisual.children[this._metronome.beat-1].classList.add("highlightBeat1")}this._barNumberElement.value=this._metronome.bar}},{key:"play",value:function(){this._metronome.play()}},{key:"pause",value:function(){this._metronome.pause()}},{key:"stop",value:function(){try{this._signatureVisual.children[this._metronome.beat-1].classList.remove("highlightBeat"),this._signatureVisual.children[this._metronome.beat-1].classList.remove("highlightBeat1")}finally{this._barNumberElement.value=1,this._metronome.stop()}}},{key:"setTempo",value:function(e){this._metronome.tempo=e}},{key:"setSignature",value:function(e){this._metronome.signature=e}},{key:"setSignatureVisual",value:function(e){this._signatureVisual=e}},{key:"setSubdivision",value:function(e){this._metronome.resolutionFactor=e}},{key:"setBarNumberElement",value:function(e){this._barNumberElement=e}}]),e}();function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,l=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"Practice",(function(){return u})),n.d(t,"makeSearchableDropDown",(function(){return i.b})),n.d(t,"SearchableDropdown",(function(){return i.a})),n.d(t,"Timer",(function(){return s})),n.d(t,"Metronome",(function(){return o}));var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"sessionKeysListener",value:function(e){var t=e.ctrlKey,n=e.keyCode;if(t&&83===n)e.preventDefault(),savePractice();else if(t&&46===n)deletePractice();else if(13===n){for(var i=e.srcElement;i=i.parentElement;)if(i&&["UL","TABLE"].includes(i.tagName))return void addEntryOnEnter(i)}else if("INPUT"===e.target.tagName){var r=parseInt(e.target.id.split("-")[1]);if("TD"===e.target.parentElement.tagName){var l=e.target.parentElement.parentElement,a=Array.from(document.getElementById("practice-exercises-mobile").children).filter((function(e){return"HR"!==e.tagName}))[r];a.children[0].children[1].value=l.children[1].children[0].value;var s=a.children[1].children[0].children[0].children;s[0].children[1].value=l.children[2].children[0].value,s[1].children[1].value=l.children[3].children[0].value,s[2].children[1].value=l.children[4].children[0].value}else if("DIV"===e.target.parentElement.tagName){for(var o=e.target;"practice-exercises-mobile"!==o.id;)o=o.parentElement;o=Array.from(o.children).find((function(e){if(null!==e.firstElementChild)return e.children[0].children[1].id.includes(r)}));var c=document.getElementById("practice-exercises").tBodies[0].children[r],d=o.children[1].children[0].children[0];c.children[1].children[0].value=o.children[0].children[1].value,c.children[2].children[0].value=d.children[0].children[1].value,c.children[3].children[0].value=d.children[1].children[1].value,c.children[4].children[0].value=d.children[2].children[1].value}else{var u=e.target.parentElement.parentElement.parentElement;u.id.includes("mobile")?document.getElementById(u.id.split("-mobile")[0]).children[r].children[1].children[0].value=e.target.value:u.classList.contains("field-body")||(document.getElementById("".concat(u.id,"-mobile")).children[r].children[1].children[0].value=e.target.value)}}else if("TEXTAREA"===e.target.tagName){var h=e.target.parentElement.id;(h.includes("mobile")?document.getElementById("".concat(h.split("-mobile")[0])):document.getElementById("".concat(h,"-mobile"))).children[0].value=e.target.value}}},{key:"addEntryOnEnter",value:function(e){var t,n;e.id.includes("mobile")?(t=document.getElementById(e.id.split("-mobile")[0]),n=e):(t=e,n=document.getElementById("".concat(e.id,"-mobile"))),addNewItem(t),addNewItem(n)}},{key:"savePractice",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE)if(200===t.status&&e){var n=JSON.parse(t.responseText);refreshFields(n),Array.from(document.getElementsByClassName("notification")).forEach((function(e){return e.style.display="none"})),bulmaToast.toast({message:n.toast,type:"is-info",animate:{in:"fadeIn",out:"fadeOut"}})}else 200!==t.status&&console.log("Error:",t)},t.open("POST",practiceUrl,e);var n=new FormData(document.getElementById("practice-form"));t.send(n)}},{key:"deletePractice",value:function(){if(confirm("Are you sure you want to delete this practice session?")){var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&(200===e.status?window.location.replace(e.responseText):console.log("Error: ",e))},e.open("DELETE",practiceUrl,!0),e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e.send(null)}}},{key:"refreshFields",value:function(e){refresh("ul-goals",e.goals),refresh("ul-positives",e.positives),refresh("ul-improvements",e.improvements),refresh("practice-exercises",e.exercises)}},{key:"refresh",value:function(e,t){var n=document.getElementById(e);if("UL"===n.tagName){var i=n.children.length;i>1&&i!==t.length&&refreshList(n,t)}else if("TABLE"===n.tagName){var r=n.children[1].children.length;r>1&&r!==t.length&&refreshTable(n,t)}}},{key:"refreshList",value:function(e,t){for(;1!==e.children.length;)e.removeChild(e.lastChild);if(t.length){e.children[0].children[1].firstElementChild.value=t[0];for(var n=1;n<t.length;n++)addNewItem(e),e.lastChild.children[1].firstElementChild.value=t[n]}}},{key:"refreshTable",value:function(e,t){for(var n=e.children[1];1!==n.children.length;)n.removeChild(n.lastChild);if(t.length){n.children[0].children[1].firstElementChild.value=t[0].name;for(var i=1;i<t.length;i++)addNewItem(e),n.lastChild.children[1].firstElementChild.value=t[i].name,n.lastChild.children[2].firstElementChild.value=t[i].bpm_start,n.lastChild.children[3].firstElementChild.value=t[i].bpm_end,n.lastChild.children[4].firstElementChild.value=t[i].minutes}}},{key:"addNodeListener",value:function(e){e.addEventListener("click",(function(e){for(var t=e.srcElement;!t.classList.contains("card");)t=t.parentNode;for(var n=t.lastElementChild;!["UL","TABLE"].includes(n.tagName);)n=n.firstElementChild;var i=getOtherElFromScreenType(n);addNewItem(n),addNewItem(i)}))}},{key:"addNewItem",value:function(e){if(removeFocus(lastActiveElement),"UL"!==e.tagName||e.id.includes("exercises"))if("UL"===e.tagName){var t=e.children.length,n=e.children[t-1],i=n.cloneNode(!0),r="<b>".concat(parseInt(i.children[0].children[0].textContent.split(".")[0])+1,".</b>");i.children[0].children[0].innerHTML=r,n.firstElementChild.children[1].classList.remove("is-focused");var l=i.children[0].children[1];updateTextInput(i.children[0].children[1]),l.textContent.bold();for(var a=0;a<3;a++){var s=i.children[1].children[0].children[0].children[a].children[1];updateCellInput(s),s.addEventListener("change",sessionKeysListener)}e.append(document.createElement("hr")),e.appendChild(i),removeNodeListener(i.firstElementChild.lastElementChild),focusElement(l),lastActiveElement=l}else{var o=e,c=o.tBodies[0].children.length,d=o.tBodies[0].children[c-1],u=d.cloneNode(!0),h=u.children;h[0].textContent=Number(h[0].textContent)+1;for(var m=1;m<5;m++){var f=h[m].firstElementChild;updateCellInput(f),f.addEventListener("change",sessionKeysListener)}removeNodeListener(h[5]),e.tBodies[0].appendChild(u),d.children[1].children[0].classList.remove("is-focused"),focusElement(u.children[1].children[0]),lastActiveElement=u.children[1].children[0]}else{var v=e.children.length,p=e.children[v-1],y=p.cloneNode(!0),g=y.children[1].firstElementChild;p.children[1].firstElementChild.classList.remove("is-focused"),updateTextInput(g),e.appendChild(y),removeNodeListener(y.lastElementChild),focusElement(g),lastActiveElement=g}}},{key:"updateTextInput",value:function(e){var t=createNewId(e.id);e.id=t,e.name=t,e.value=""}},{key:"createNewId",value:function(e){var t=e.split("-");return"".concat(t[0],"-").concat(Number(t[1])+1,"-").concat(t[2])}},{key:"updateCellInput",value:function(e){var t=createNewId(e.id);e.id=t,e.name=t,e.value=e.defaultValue,e.hasAttribute("min")||(e.value="")}},{key:"removeNodeListener",value:function(e){e.addEventListener("click",(function(e){for(var t=e.srcElement;"LI"!==t.tagName&&"TR"!==t.tagName;)t=t.parentNode;if(t.parentElement.id.includes("exercises-mobile")){var n=t.parentElement;if(1===n.childElementCount){t.firstElementChild.children[1].value="";for(var i=0;i<3;i++){var r=t.lastElementChild.children[0].children[0].children[0].children[1];r.value=r.defaultValue}var l=document.getElementById("practice-exercises").tBodies[0].children[0].children;l[1].children[0].value="";for(var a=2;a<4;a++)l[a].children[0].value=l[2].children[0].defaultValue}else{var s=Array.from(t.parentElement.children).filter((function(e){return"HR"!==e.tagName})).findIndex((function(e){return e===t})),o=Array.from(n.children).find((function(e){return e===t})),c=Array.from(n.children).findIndex((function(e){return e===t}));n.removeChild(o),0===s?n.removeChild(n.children[c]):n.removeChild(n.children[c-1]),updateIdsMobile();var d=document.getElementById("practice-exercises").tBodies[0];d.removeChild(d.children[s]),updateIdsDesktop(d),Array.from(d.children).forEach((function(e,t){return e.children[0].textContent=t+1}))}}else if("LI"===t.tagName){var u=t.parentElement,h=Array.from(u.children).findIndex((function(e){return e===t})),m=getOtherElFromScreenType(u),f=m.children[h];1===u.childElementCount?(t.children[1].firstElementChild.value="",f.children[1].firstElementChild.value=""):(u.removeChild(t),m.removeChild(f))}else{var v=t.parentElement,p=document.getElementById("practice-exercises-mobile");if(1===v.childElementCount){t.children[1].firstElementChild.value="";for(var y=2;y<5;y++){var g=t.children[y].firstElementChild;g.value=g.defaultValue,updateNewIdTable(g,0)}p.children[0].children[0].children[1].value="";for(var E=0;E<3;E++){var b=p.children[0].children[1].children[0].children[0].children[E].children[1];b.value=b.defaultValue}}else{v.removeChild(t),updateIdsDesktop(v);var C=parseInt(t.children[1].firstElementChild.id.split("-")[1]),w=Array.from(p.children).findIndex((function(e){if(null!==e.firstElementChild)return e.children[0].children[1].id.includes(C)}));p.removeChild(p.children[w]),0===C?p.removeChild(p.children[w]):p.removeChild(p.children[w-1]),updateIdsMobile()}Array.from(v.children).forEach((function(e,t){return e.children[0].textContent=t+1}))}}))}},{key:"updateIdsMobile",value:function(){var e=document.getElementById("practice-exercises-mobile");Array.from(e.children).filter((function(e){return"HR"!==e.tagName})).forEach((function(e,t){var n=e.firstElementChild.children[1].id.split("-");e.firstElementChild.firstElementChild.firstElementChild.innerHTML="<b>".concat(t+1,".</b>"),e.firstElementChild.children[1].id="".concat(n[0],"-").concat(t,"-").concat(n[2]);for(var i=0;i<3;i++)updateNewIdTable(e.children[1].firstElementChild.firstElementChild.children[i].children[1],t)}))}},{key:"updateIdsDesktop",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,l=Array.from(e.children).entries()[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var a=c(r.value,2);idx=a[0],tr=a[1];for(var s=1;s<5;s++)updateNewIdTable(tr.children[s].firstElementChild,idx)}}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}}},{key:"updateNewIdTable",value:function(e,t){idParts=e.id.split("-"),newId="".concat(idParts[0],"-").concat(t,"-").concat(idParts[2]),e.id=newId,e.name=newId}},{key:"tabListener",value:function(e){9===e&&removeFocus(lastActiveElement)}},{key:"removeFocus",value:function(e){e&&(e.classList.remove("is-focused"),e=null)}},{key:"focusElement",value:function(e){e.focus(),e.className+=" is-focused"}}])&&d(t.prototype,n),i&&d(t,i),e}()}}));